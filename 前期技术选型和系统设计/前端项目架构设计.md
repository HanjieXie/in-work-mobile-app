# React Native é¡¹ç›®æ­å»ºä¸æ¶æ„è®¾è®¡æ–‡æ¡£

## ğŸ“‹ ç›®å½•

1. [ç¯å¢ƒå‡†å¤‡](#1-ç¯å¢ƒå‡†å¤‡)
2. [é¡¹ç›®åˆå§‹åŒ–](#2-é¡¹ç›®åˆå§‹åŒ–)
3. [é¡¹ç›®ç»“æ„è®¾è®¡](#3-é¡¹ç›®ç»“æ„è®¾è®¡)
4. [æ ¸å¿ƒé…ç½®](#4-æ ¸å¿ƒé…ç½®)
5. [æ¶æ„è®¾è®¡](#5-æ¶æ„è®¾è®¡)
6. [åŠŸèƒ½æ¨¡å—å®ç°](#6-åŠŸèƒ½æ¨¡å—å®ç°)
7. [æ€§èƒ½ä¼˜åŒ–](#7-æ€§èƒ½ä¼˜åŒ–)
8. [æµ‹è¯•ç­–ç•¥](#8-æµ‹è¯•ç­–ç•¥)
9. [æ‰“åŒ…å‘å¸ƒ](#9-æ‰“åŒ…å‘å¸ƒ)

---

## 1. ç¯å¢ƒå‡†å¤‡

### 1.1 å¼€å‘ç¯å¢ƒè¦æ±‚

```yaml
å¿…éœ€å·¥å…·:
  - Node.js: 18.x LTS æˆ– 20.x LTS
  - npm: 9.x+ æˆ– yarn: 1.22+ æˆ– pnpm: 8.x+
  - Watchman: æœ€æ–°ç‰ˆ (macOS/Linux)
  - JDK: 17 (Androidå¼€å‘)
  - CocoaPods: æœ€æ–°ç‰ˆ (iOSå¼€å‘ï¼Œä»…macOS)

iOSå¼€å‘ (ä»…macOS):
  - Xcode: 15.0+
  - iOS Simulator
  - Command Line Tools

Androidå¼€å‘:
  - Android Studio: æœ€æ–°ç‰ˆ
  - Android SDK: API 33+
  - Android Emulator æˆ– çœŸæœº

æ¨èIDE:
  - VS Code + React Native Toolsæ‰©å±•
  - WebStorm / IntelliJ IDEA
```

### 1.2 ç¯å¢ƒå®‰è£…æ­¥éª¤

#### **macOS ç¯å¢ƒ**

```bash
# å®‰è£…Homebrew (å¦‚æœªå®‰è£…)
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# å®‰è£…Node.js
brew install node@20

# å®‰è£…Watchman
brew install watchman

# å®‰è£…CocoaPods
sudo gem install cocoapods

# å®‰è£…JDK
brew install openjdk@17

# éªŒè¯å®‰è£…
node --version
npm --version
watchman --version
pod --version
java -version
```

#### **Windows ç¯å¢ƒ**

```powershell
# ä½¿ç”¨Chocolateyå®‰è£… (ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ)
# å®‰è£…Chocolatey
Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://community.chocolatey.org/install.ps1'))

# å®‰è£…Node.js
choco install nodejs-lts

# å®‰è£…JDK
choco install openjdk17

# éªŒè¯å®‰è£…
node --version
npm --version
java -version
```

### 1.3 Android Studio é…ç½®

```bash
# 1. ä¸‹è½½å®‰è£…Android Studio
# https://developer.android.com/studio

# 2. å®‰è£…SDK (é€šè¿‡Android Studio)
# - Android SDK Platform 33
# - Android SDK Build-Tools 33.0.0
# - Android SDK Platform-Tools
# - Android Emulator

# 3. é…ç½®ç¯å¢ƒå˜é‡
# macOS/Linux (~/.bash_profile æˆ– ~/.zshrc)
export ANDROID_HOME=$HOME/Library/Android/sdk
export PATH=$PATH:$ANDROID_HOME/emulator
export PATH=$PATH:$ANDROID_HOME/platform-tools

# Windows (ç³»ç»Ÿç¯å¢ƒå˜é‡)
ANDROID_HOME=C:\Users\ä½ çš„ç”¨æˆ·å\AppData\Local\Android\Sdk
Path=%ANDROID_HOME%\platform-tools;%ANDROID_HOME%\emulator;%ANDROID_HOME%\tools;%ANDROID_HOME%\tools\bin

# éªŒè¯
adb --version
```

### 1.4 Xcode é…ç½® (ä»…macOS)

```bash
# 1. ä»App Storeå®‰è£…Xcode

# 2. å®‰è£…Command Line Tools
sudo xcode-select --install

# 3. åŒæ„è®¸å¯åè®®
sudo xcodebuild -license accept

# 4. éªŒè¯
xcodebuild -version
```

---

## 2. é¡¹ç›®åˆå§‹åŒ–

### 2.1 åˆ›å»ºReact Nativeé¡¹ç›®

```bash
# ä½¿ç”¨React Native CLIåˆ›å»ºé¡¹ç›® (æ¨è)
npx react-native@latest init WorkEfficiencyApp --version 0.73.0

# æˆ–ä½¿ç”¨TypeScriptæ¨¡æ¿
npx react-native@latest init WorkEfficiencyApp --template react-native-template-typescript

# è¿›å…¥é¡¹ç›®ç›®å½•
cd WorkEfficiencyApp
```

### 2.2 é¡¹ç›®åŸºç¡€é…ç½®

#### **é…ç½®TypeScript**

```bash
# å®‰è£…TypeScriptä¾èµ– (å¦‚æœæœªå®‰è£…)
npm install --save-dev typescript @types/react @types/react-native

# ç”Ÿæˆtsconfig.json (å¦‚æœä¸å­˜åœ¨)
npx tsc --init
```

**tsconfig.json é…ç½®**

```json
{
  "compilerOptions": {
    "target": "esnext",
    "module": "commonjs",
    "lib": ["es2019", "es2020.promise", "es2020.bigint", "es2020.string"],
    "jsx": "react-native",
    "strict": true,
    "moduleResolution": "node",
    "allowSyntheticDefaultImports": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "baseUrl": "./src",
    "paths": {
      "@components/*": ["components/*"],
      "@screens/*": ["screens/*"],
      "@navigation/*": ["navigation/*"],
      "@services/*": ["services/*"],
      "@store/*": ["store/*"],
      "@utils/*": ["utils/*"],
      "@assets/*": ["../assets/*"],
      "@types/*": ["types/*"],
      "@hooks/*": ["hooks/*"],
      "@constants/*": ["constants/*"]
    }
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "babel.config.js", "metro.config.js", "jest.config.js"]
}
```

#### **é…ç½®Babel**

**babel.config.js**

```javascript
module.exports = {
  presets: ['module:metro-react-native-babel-preset'],
  plugins: [
    [
      'module-resolver',
      {
        root: ['./src'],
        extensions: ['.ios.js', '.android.js', '.js', '.ts', '.tsx', '.json'],
        alias: {
          '@components': './src/components',
          '@screens': './src/screens',
          '@navigation': './src/navigation',
          '@services': './src/services',
          '@store': './src/store',
          '@utils': './src/utils',
          '@assets': './assets',
          '@types': './src/types',
          '@hooks': './src/hooks',
          '@constants': './src/constants',
        },
      },
    ],
    'react-native-reanimated/plugin', // å¿…é¡»æ”¾åœ¨æœ€å
  ],
};
```

#### **é…ç½®Metro**

**metro.config.js**

```javascript
const { getDefaultConfig, mergeConfig } = require('@react-native/metro-config');

/**
 * Metro configuration
 * https://facebook.github.io/metro/docs/configuration
 *
 * @type {import('metro-config').MetroConfig}
 */
const config = {
  transformer: {
    getTransformOptions: async () => ({
      transform: {
        experimentalImportSupport: false,
        inlineRequires: true,
      },
    }),
  },
  resolver: {
    sourceExts: ['jsx', 'js', 'ts', 'tsx', 'json'],
  },
};

module.exports = mergeConfig(getDefaultConfig(__dirname), config);
```

### 2.3 å®‰è£…æ ¸å¿ƒä¾èµ–

```bash
# å¯¼èˆª
npm install @react-navigation/native @react-navigation/native-stack @react-navigation/bottom-tabs @react-navigation/drawer
npm install react-native-screens react-native-safe-area-context
npm install react-native-gesture-handler react-native-reanimated

# çŠ¶æ€ç®¡ç†
npm install @reduxjs/toolkit react-redux
# æˆ–è€…ä½¿ç”¨ Zustand
npm install zustand

# UIç»„ä»¶åº“ (é€‰æ‹©å…¶ä¸€æˆ–ç»„åˆä½¿ç”¨)
npm install react-native-paper react-native-vector-icons
# æˆ–
npm install native-base react-native-svg

# ç½‘ç»œè¯·æ±‚
npm install axios
npm install @tanstack/react-query

# æœ¬åœ°å­˜å‚¨
npm install @react-native-async-storage/async-storage
# å¤§æ•°æ®å­˜å‚¨ (é€‰æ‹©å…¶ä¸€)
npm install @nozbe/watermelondb @nozbe/with-observables
# æˆ–
npm install realm

# æ¨é€é€šçŸ¥
npm install react-native-push-notification
npm install @react-native-firebase/app @react-native-firebase/messaging

# è§†é¢‘ä¼šè®®
npm install react-native-agora
# æˆ–è…¾è®¯äº‘
npm install trtc-react-native

# å¯Œæ–‡æœ¬ç¼–è¾‘
npm install react-native-pell-rich-editor react-native-webview

# ç”Ÿç‰©è¯†åˆ«
npm install react-native-biometrics

# ç›¸æœºå’Œæ‰«æ
npm install react-native-vision-camera
npm install react-native-document-scanner-plugin

# æ–‡ä»¶å¤„ç†
npm install react-native-fs

# å›¾è¡¨
npm install victory-native react-native-svg
# æˆ–
npm install react-native-chart-kit

# å›½é™…åŒ–
npm install react-i18next i18next

# æ—¥æœŸå¤„ç†
npm install date-fns

# è¡¨å•å¤„ç†
npm install react-hook-form

# ç±»å‹å®šä¹‰
npm install --save-dev @types/react @types/react-native
```

### 2.4 é…ç½®iOS (macOS)

```bash
# è¿›å…¥iosç›®å½•
cd ios

# å®‰è£…CocoaPodsä¾èµ–
pod install

# è¿”å›é¡¹ç›®æ ¹ç›®å½•
cd ..

# é…ç½®Info.plistæƒé™
# ç¼–è¾‘ ios/WorkEfficiencyApp/Info.plist æ·»åŠ ä»¥ä¸‹æƒé™
```

**ios/WorkEfficiencyApp/Info.plist æ·»åŠ æƒé™**

```xml
<dict>
  <!-- ç›¸æœºæƒé™ -->
  <key>NSCameraUsageDescription</key>
  <string>æˆ‘ä»¬éœ€è¦è®¿é—®æ‚¨çš„ç›¸æœºä»¥æ‰«ææ–‡æ¡£å’Œæ‹ç…§</string>
  
  <!-- éº¦å…‹é£æƒé™ -->
  <key>NSMicrophoneUsageDescription</key>
  <string>æˆ‘ä»¬éœ€è¦è®¿é—®æ‚¨çš„éº¦å…‹é£ä»¥è¿›è¡Œè§†é¢‘ä¼šè®®</string>
  
  <!-- ç›¸å†Œæƒé™ -->
  <key>NSPhotoLibraryUsageDescription</key>
  <string>æˆ‘ä»¬éœ€è¦è®¿é—®æ‚¨çš„ç›¸å†Œä»¥é€‰æ‹©å›¾ç‰‡</string>
  
  <!-- Face IDæƒé™ -->
  <key>NSFaceIDUsageDescription</key>
  <string>ä½¿ç”¨Face IDå¿«é€Ÿç™»å½•</string>
  
  <!-- é€šçŸ¥æƒé™ -->
  <key>UIBackgroundModes</key>
  <array>
    <string>remote-notification</string>
  </array>
</dict>
```

### 2.5 é…ç½®Android

**android/app/src/main/AndroidManifest.xml æ·»åŠ æƒé™**

```xml
<manifest xmlns:android="http://schemas.android.com/apk/res/android">
    
    <!-- æƒé™å£°æ˜ -->
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.USE_BIOMETRIC" />
    <uses-permission android:name="android.permission.USE_FINGERPRINT" />
    <uses-permission android:name="android.permission.VIBRATE" />
    
    <!-- ç›¸æœºç‰¹æ€§ -->
    <uses-feature android:name="android.hardware.camera" android:required="false" />
    <uses-feature android:name="android.hardware.camera.autofocus" android:required="false" />

    <application>
        <!-- ... -->
    </application>
</manifest>
```

**android/build.gradle é…ç½®**

```gradle
buildscript {
    ext {
        buildToolsVersion = "34.0.0"
        minSdkVersion = 21
        compileSdkVersion = 34
        targetSdkVersion = 34
        ndkVersion = "25.1.8937393"
        kotlinVersion = "1.9.0"
    }
    // ...
}
```

### 2.6 é…ç½®ä»£ç è´¨é‡å·¥å…·

#### **ESLint é…ç½®**

```bash
# å®‰è£…ESLint
npm install --save-dev eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin
npm install --save-dev eslint-plugin-react eslint-plugin-react-native eslint-plugin-react-hooks
```

**.eslintrc.js**

```javascript
module.exports = {
  root: true,
  extends: [
    '@react-native',
    'eslint:recommended',
    'plugin:@typescript-eslint/recommended',
    'plugin:react/recommended',
    'plugin:react-hooks/recommended',
  ],
  parser: '@typescript-eslint/parser',
  plugins: ['@typescript-eslint', 'react', 'react-native', 'react-hooks'],
  rules: {
    'react/react-in-jsx-scope': 'off',
    'react-native/no-inline-styles': 'warn',
    '@typescript-eslint/no-unused-vars': ['error', { argsIgnorePattern: '^_' }],
    '@typescript-eslint/explicit-function-return-type': 'off',
    'react-hooks/rules-of-hooks': 'error',
    'react-hooks/exhaustive-deps': 'warn',
  },
  settings: {
    react: {
      version: 'detect',
    },
  },
};
```

#### **Prettier é…ç½®**

```bash
# å®‰è£…Prettier
npm install --save-dev prettier eslint-config-prettier eslint-plugin-prettier
```

**.prettierrc.js**

```javascript
module.exports = {
  arrowParens: 'avoid',
  bracketSameLine: true,
  bracketSpacing: true,
  singleQuote: true,
  trailingComma: 'es5',
  semi: true,
  printWidth: 100,
  tabWidth: 2,
  useTabs: false,
};
```

**.prettierignore**

```
node_modules/
ios/
android/
.expo/
dist/
.expo-shared/
```

#### **é…ç½® Husky + lint-staged**

```bash
# å®‰è£…Huskyå’Œlint-staged
npm install --save-dev husky lint-staged

# åˆå§‹åŒ–Husky
npx husky-init && npm install
```

**package.json æ·»åŠ é…ç½®**

```json
{
  "scripts": {
    "lint": "eslint . --ext .js,.jsx,.ts,.tsx",
    "lint:fix": "eslint . --ext .js,.jsx,.ts,.tsx --fix",
    "format": "prettier --write \"src/**/*.{js,jsx,ts,tsx,json,css,scss,md}\"",
    "prepare": "husky install"
  },
  "lint-staged": {
    "src/**/*.{js,jsx,ts,tsx}": [
      "eslint --fix",
      "prettier --write"
    ],
    "src/**/*.{json,css,scss,md}": [
      "prettier --write"
    ]
  }
}
```

**.husky/pre-commit**

```bash
#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

npx lint-staged
```

---

## 3. é¡¹ç›®ç»“æ„è®¾è®¡

### 3.1 å®Œæ•´ç›®å½•ç»“æ„

```
WorkEfficiencyApp/
â”œâ”€â”€ android/                      # AndroidåŸç”Ÿä»£ç 
â”œâ”€â”€ ios/                          # iOSåŸç”Ÿä»£ç 
â”œâ”€â”€ assets/                       # é™æ€èµ„æº
â”‚   â”œâ”€â”€ fonts/                    # å­—ä½“æ–‡ä»¶
â”‚   â”œâ”€â”€ images/                   # å›¾ç‰‡èµ„æº
â”‚   â”œâ”€â”€ icons/                    # å›¾æ ‡èµ„æº
â”‚   â””â”€â”€ animations/               # åŠ¨ç”»æ–‡ä»¶ (Lottieç­‰)
â”œâ”€â”€ src/                          # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ components/               # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ common/               # åŸºç¡€ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Button/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Button.styles.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ Input/
â”‚   â”‚   â”‚   â”œâ”€â”€ Card/
â”‚   â”‚   â”‚   â”œâ”€â”€ Avatar/
â”‚   â”‚   â”‚   â”œâ”€â”€ Badge/
â”‚   â”‚   â”‚   â”œâ”€â”€ Modal/
â”‚   â”‚   â”‚   â”œâ”€â”€ Loading/
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ business/             # ä¸šåŠ¡ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ EmailItem/
â”‚   â”‚   â”‚   â”œâ”€â”€ TaskCard/
â”‚   â”‚   â”‚   â”œâ”€â”€ CalendarEvent/
â”‚   â”‚   â”‚   â”œâ”€â”€ MeetingCard/
â”‚   â”‚   â”‚   â”œâ”€â”€ NoteEditor/
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ screens/                  # é¡µé¢/å±å¹•
â”‚   â”‚   â”œâ”€â”€ Auth/                 # è®¤è¯ç›¸å…³é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginScreen.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ RegisterScreen.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ForgotPasswordScreen.tsx
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ Email/                # é‚®ä»¶æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ EmailListScreen.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ EmailDetailScreen.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ EmailComposeScreen.tsx
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ Calendar/             # æ—¥å†æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ CalendarScreen.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ EventDetailScreen.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ CreateEventScreen.tsx
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ Task/                 # ä»»åŠ¡æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ TaskListScreen.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ TaskDetailScreen.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ CreateTaskScreen.tsx
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ Meeting/              # ä¼šè®®æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ MeetingListScreen.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ MeetingRoomScreen.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ MeetingNoteScreen.tsx
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ Note/                 # ç¬”è®°æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ NoteListScreen.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ NoteEditorScreen.tsx
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ WorkLog/              # å·¥ä½œæ—¥å¿—
â”‚   â”‚   â”‚   â”œâ”€â”€ WorkLogScreen.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ StatisticsScreen.tsx
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ Settings/             # è®¾ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ SettingsScreen.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ProfileScreen.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ NotificationSettingsScreen.tsx
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ Home/                 # é¦–é¡µ/ä»ªè¡¨ç›˜
â”‚   â”‚       â”œâ”€â”€ HomeScreen.tsx
â”‚   â”‚       â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ navigation/               # å¯¼èˆªé…ç½®
â”‚   â”‚   â”œâ”€â”€ AppNavigator.tsx      # ä¸»å¯¼èˆª
â”‚   â”‚   â”œâ”€â”€ AuthNavigator.tsx     # è®¤è¯å¯¼èˆª
â”‚   â”‚   â”œâ”€â”€ MainNavigator.tsx     # ä¸»åº”ç”¨å¯¼èˆª
â”‚   â”‚   â”œâ”€â”€ TabNavigator.tsx      # åº•éƒ¨æ ‡ç­¾å¯¼èˆª
â”‚   â”‚   â”œâ”€â”€ types.ts              # å¯¼èˆªç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ store/                    # ReduxçŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ index.ts              # Storeé…ç½®
â”‚   â”‚   â”œâ”€â”€ hooks.ts              # è‡ªå®šä¹‰Redux Hooks
â”‚   â”‚   â”œâ”€â”€ slices/               # Redux Slices
â”‚   â”‚   â”‚   â”œâ”€â”€ authSlice.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ emailSlice.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ calendarSlice.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ taskSlice.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ meetingSlice.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ noteSlice.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ settingsSlice.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ services/             # RTK Query API
â”‚   â”‚       â”œâ”€â”€ authApi.ts
â”‚   â”‚       â”œâ”€â”€ emailApi.ts
â”‚   â”‚       â”œâ”€â”€ calendarApi.ts
â”‚   â”‚       â”œâ”€â”€ taskApi.ts
â”‚   â”‚       â”œâ”€â”€ meetingApi.ts
â”‚   â”‚       â”œâ”€â”€ noteApi.ts
â”‚   â”‚       â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ services/                 # ä¸šåŠ¡æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ api/                  # APIæœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ client.ts         # Axioså®ä¾‹é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ interceptors.ts   # è¯·æ±‚æ‹¦æˆªå™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ endpoints.ts      # APIç«¯ç‚¹å¸¸é‡
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ storage/              # å­˜å‚¨æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ asyncStorage.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ secureStorage.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ database/         # æ•°æ®åº“ (WatermelonDB/Realm)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ schema.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ notification/         # æ¨é€é€šçŸ¥æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ pushNotification.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ fcm.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ meeting/              # ä¼šè®®æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ agora.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ trtc.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ biometric/            # ç”Ÿç‰©è¯†åˆ«æœåŠ¡
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ i18n/                 # å›½é™…åŒ–æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ config.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ locales/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ en.json
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ zh.json
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ja.json
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ hooks/                    # è‡ªå®šä¹‰Hooks
â”‚   â”‚   â”œâ”€â”€ useAuth.ts
â”‚   â”‚   â”œâ”€â”€ useEmail.ts
â”‚   â”‚   â”œâ”€â”€ useCalendar.ts
â”‚   â”‚   â”œâ”€â”€ useTask.ts
â”‚   â”‚   â”œâ”€â”€ useMeeting.ts
â”‚   â”‚   â”œâ”€â”€ useNote.ts
â”‚   â”‚   â”œâ”€â”€ useNotification.ts
â”‚   â”‚   â”œâ”€â”€ useBiometric.ts
â”‚   â”‚   â”œâ”€â”€ useCamera.ts
â”‚   â”‚   â”œâ”€â”€ useKeyboard.ts
â”‚   â”‚   â”œâ”€â”€ useDebounce.ts
â”‚   â”‚   â”œâ”€â”€ useThrottle.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ utils/                    # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ date.ts               # æ—¥æœŸå¤„ç†
â”‚   â”‚   â”œâ”€â”€ validation.ts         # æ•°æ®éªŒè¯
â”‚   â”‚   â”œâ”€â”€ format.ts             # æ ¼å¼åŒ–å·¥å…·
â”‚   â”‚   â”œâ”€â”€ platform.ts           # å¹³å°åˆ¤æ–­
â”‚   â”‚   â”œâ”€â”€ permission.ts         # æƒé™å¤„ç†
â”‚   â”‚   â”œâ”€â”€ error.ts              # é”™è¯¯å¤„ç†
â”‚   â”‚   â”œâ”€â”€ crypto.ts             # åŠ å¯†å·¥å…·
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ constants/                # å¸¸é‡å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ colors.ts             # é¢œè‰²å¸¸é‡
â”‚   â”‚   â”œâ”€â”€ dimensions.ts         # å°ºå¯¸å¸¸é‡
â”‚   â”‚   â”œâ”€â”€ config.ts             # é…ç½®å¸¸é‡
â”‚   â”‚   â”œâ”€â”€ api.ts                # APIå¸¸é‡
â”‚   â”‚   â”œâ”€â”€ routes.ts             # è·¯ç”±å¸¸é‡
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ types/                    # TypeScriptç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ auth.types.ts
â”‚   â”‚   â”œâ”€â”€ email.types.ts
â”‚   â”‚   â”œâ”€â”€ calendar.types.ts
â”‚   â”‚   â”œâ”€â”€ task.types.ts
â”‚   â”‚   â”œâ”€â”€ meeting.types.ts
â”‚   â”‚   â”œâ”€â”€ note.types.ts
â”‚   â”‚   â”œâ”€â”€ common.types.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ theme/                    # ä¸»é¢˜é…ç½®
â”‚   â”‚   â”œâ”€â”€ colors.ts
â”‚   â”‚   â”œâ”€â”€ typography.ts
â”‚   â”‚   â”œâ”€â”€ spacing.ts
â”‚   â”‚   â”œâ”€â”€ shadows.ts
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ ThemeProvider.tsx
â”‚   â”œâ”€â”€ App.tsx                   # åº”ç”¨å…¥å£
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ __tests__/                    # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ screens/
â”‚   â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ utils/
â”œâ”€â”€ .env.development              # å¼€å‘ç¯å¢ƒå˜é‡
â”œâ”€â”€ .env.production               # ç”Ÿäº§ç¯å¢ƒå˜é‡
â”œâ”€â”€ .env.staging                  # æµ‹è¯•ç¯å¢ƒå˜é‡
â”œâ”€â”€ .eslintrc.js                  # ESLinté…ç½®
â”œâ”€â”€ .prettierrc.js                # Prettieré…ç½®
â”œâ”€â”€ babel.config.js               # Babelé…ç½®
â”œâ”€â”€ metro.config.js               # Metroé…ç½®
â”œâ”€â”€ tsconfig.json                 # TypeScripté…ç½®
â”œâ”€â”€ jest.config.js                # Jesté…ç½®
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

### 3.2 åˆ›å»ºåŸºç¡€ç›®å½•ç»“æ„

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
mkdir -p src/{components/{common,business},screens/{Auth,Email,Calendar,Task,Meeting,Note,WorkLog,Settings,Home},navigation,store/{slices,services},services/{api,storage/database,notification,meeting,biometric,i18n/locales},hooks,utils,constants,types,theme}

mkdir -p assets/{fonts,images,icons,animations}

mkdir -p __tests__/{components,screens,hooks,utils}

# åˆ›å»ºindex.tsæ–‡ä»¶
touch src/{components,screens,navigation,store,services,hooks,utils,constants,types,theme}/index.ts
```

---

## 4. æ ¸å¿ƒé…ç½®

### 4.1 ä¸»é¢˜é…ç½®

**src/theme/colors.ts**

```typescript
export const lightColors = {
  primary: '#6200EE',
  primaryDark: '#3700B3',
  primaryLight: '#BB86FC',
  secondary: '#03DAC6',
  secondaryDark: '#018786',
  background: '#FFFFFF',
  surface: '#FFFFFF',
  error: '#B00020',
  warning: '#FFA726',
  success: '#4CAF50',
  info: '#2196F3',
  onPrimary: '#FFFFFF',
  onSecondary: '#000000',
  onBackground: '#000000',
  onSurface: '#000000',
  onError: '#FFFFFF',
  text: {
    primary: '#000000',
    secondary: '#757575',
    disabled: '#9E9E9E',
    hint: '#BDBDBD',
  },
  divider: '#E0E0E0',
  border: '#E0E0E0',
  card: '#FFFFFF',
  notification: '#FF4081',
};

export const darkColors = {
  primary: '#BB86FC',
  primaryDark: '#3700B3',
  primaryLight: '#E1BEE7',
  secondary: '#03DAC6',
  secondaryDark: '#018786',
  background: '#121212',
  surface: '#1E1E1E',
  error: '#CF6679',
  warning: '#FFB74D',
  success: '#81C784',
  info: '#64B5F6',
  onPrimary: '#000000',
  onSecondary: '#000000',
  onBackground: '#FFFFFF',
  onSurface: '#FFFFFF',
  onError: '#000000',
  text: {
    primary: '#FFFFFF',
    secondary: '#B0B0B0',
    disabled: '#808080',
    hint: '#707070',
  },
  divider: '#2C2C2C',
  border: '#2C2C2C',
  card: '#1E1E1E',
  notification: '#FF4081',
};

export type Colors = typeof lightColors;
```

**src/theme/typography.ts**

```typescript
export const typography = {
  h1: {
    fontSize: 32,
    fontWeight: '700' as const,
    lineHeight: 40,
  },
  h2: {
    fontSize: 28,
    fontWeight: '700' as const,
    lineHeight: 36,
  },
  h3: {
    fontSize: 24,
    fontWeight: '600' as const,
    lineHeight: 32,
  },
  h4: {
    fontSize: 20,
    fontWeight: '600' as const,
    lineHeight: 28,
  },
  h5: {
    fontSize: 18,
    fontWeight: '600' as const,
    lineHeight: 24,
  },
  h6: {
    fontSize: 16,
    fontWeight: '600' as const,
    lineHeight: 24,
  },
  body1: {
    fontSize: 16,
    fontWeight: '400' as const,
    lineHeight: 24,
  },
  body2: {
    fontSize: 14,
    fontWeight: '400' as const,
    lineHeight: 20,
  },
  button: {
    fontSize: 14,
    fontWeight: '600' as const,
    lineHeight: 20,
    textTransform: 'uppercase' as const,
  },
  caption: {
    fontSize: 12,
    fontWeight: '400' as const,
    lineHeight: 16,
  },
  overline: {
    fontSize: 10,
    fontWeight: '400' as const,
    lineHeight: 16,
    textTransform: 'uppercase' as const,
  },
};

export type Typography = typeof typography;
```

**src/theme/spacing.ts**

```typescript
export const spacing = {
  xs: 4,
  sm: 8,
  md: 16,
  lg: 24,
  xl: 32,
  xxl: 40,
};

export type Spacing = typeof spacing;
```

**src/theme/index.ts**

```typescript
import { lightColors, darkColors, Colors } from './colors';
import { typography, Typography } from './typography';
import { spacing, Spacing } from './spacing';

export interface Theme {
  colors: Colors;
  typography: Typography;
  spacing: Spacing;
  isDark: boolean;
}

export const lightTheme: Theme = {
  colors: lightColors,
  typography,
  spacing,
  isDark: false,
};

export const darkTheme: Theme = {
  colors: darkColors,
  typography,
  spacing,
  isDark: true,
};

export * from './ThemeProvider';
```

**src/theme/ThemeProvider.tsx**

```typescript
import React, { createContext, useContext, useState, ReactNode } from 'react';
import { useColorScheme } from 'react-native';
import { Theme, lightTheme, darkTheme } from './index';

interface ThemeContextType {
  theme: Theme;
  isDark: boolean;
  toggleTheme: () => void;
  setTheme: (isDark: boolean) => void;
}

const ThemeContext = createContext<ThemeContextType | undefined>(undefined);

export const useTheme = () => {
  const context = useContext(ThemeContext);
  if (!context) {
    throw new Error('useTheme must be used within ThemeProvider');
  }
  return context;
};

interface ThemeProviderProps {
  children: ReactNode;
}

export const ThemeProvider: React.FC<ThemeProviderProps> = ({ children }) => {
  const systemColorScheme = useColorScheme();
  const [isDark, setIsDark] = useState(systemColorScheme === 'dark');

  const theme = isDark ? darkTheme : lightTheme;

  const toggleTheme = () => setIsDark(prev => !prev);
  const setTheme = (dark: boolean) => setIsDark(dark);

  return (
    <ThemeContext.Provider value={{ theme, isDark, toggleTheme, setTheme }}>
      {children}
    </ThemeContext.Provider>
  );
};
```

### 4.2 å¸¸é‡é…ç½®

**src/constants/config.ts**

```typescript
export const APP_CONFIG = {
  APP_NAME: 'WorkEfficiency',
  VERSION: '1.0.0',
  BUILD_NUMBER: 1,
  API_TIMEOUT: 30000, // 30ç§’
  MAX_FILE_SIZE: 10 * 1024 * 1024, // 10MB
  SUPPORTED_IMAGE_TYPES: ['image/jpeg', 'image/png', 'image/jpg'],
  SUPPORTED_DOCUMENT_TYPES: ['application/pdf', 'application/msword'],
};

export const STORAGE_KEYS = {
  AUTH_TOKEN: '@auth_token',
  REFRESH_TOKEN: '@refresh_token',
  USER_DATA: '@user_data',
  THEME: '@theme',
  LANGUAGE: '@language',
  BIOMETRIC_ENABLED: '@biometric_enabled',
};

export const NOTIFICATION_CHANNELS = {
  EMAIL: 'email_notifications',
  TASK: 'task_notifications',
  MEETING: 'meeting_notifications',
  GENERAL: 'general_notifications',
};
```

**src/constants/api.ts**

```typescript
export const API_BASE_URL = __DEV__
  ? 'http://localhost:3000/api/v1'
  : 'https://api.workefficiency.com/v1';

export const API_ENDPOINTS = {
  // è®¤è¯
  AUTH: {
    LOGIN: '/auth/login',
    REGISTER: '/auth/register',
    LOGOUT: '/auth/logout',
    REFRESH: '/auth/refresh',
    FORGOT_PASSWORD: '/auth/forgot-password',
    RESET_PASSWORD: '/auth/reset-password',
  },
  // é‚®ä»¶
  EMAIL: {
    LIST: '/emails',
    DETAIL: (id: string) => `/emails/${id}`,
    SEND: '/emails/send',
    DELETE: (id: string) => `/emails/${id}`,
    MARK_READ: (id: string) => `/emails/${id}/read`,
  },
  // æ—¥å†
  CALENDAR: {
    EVENTS: '/calendar/events',
    EVENT_DETAIL: (id: string) => `/calendar/events/${id}`,
    CREATE_EVENT: '/calendar/events',
    UPDATE_EVENT: (id: string) => `/calendar/events/${id}`,
    DELETE_EVENT: (id: string) => `/calendar/events/${id}`,
  },
  // ä»»åŠ¡
  TASK: {
    LIST: '/tasks',
    DETAIL: (id: string) => `/tasks/${id}`,
    CREATE: '/tasks',
    UPDATE: (id: string) => `/tasks/${id}`,
    DELETE: (id: string) => `/tasks/${id}`,
    COMPLETE: (id: string) => `/tasks/${id}/complete`,
  },
  // ä¼šè®®
  MEETING: {
    LIST: '/meetings',
    DETAIL: (id: string) => `/meetings/${id}`,
    CREATE: '/meetings',
    JOIN: (id: string) => `/meetings/${id}/join`,
    NOTES: (id: string) => `/meetings/${id}/notes`,
  },
  // ç¬”è®°
  NOTE: {
    LIST: '/notes',
    DETAIL: (id: string) => `/notes/${id}`,
    CREATE: '/notes',
    UPDATE: (id: string) => `/notes/${id}`,
    DELETE: (id: string) => `/notes/${id}`,
  },
  // ç”¨æˆ·
  USER: {
    PROFILE: '/user/profile',
    UPDATE_PROFILE: '/user/profile',
    AVATAR: '/user/avatar',
  },
};
```

**src/constants/routes.ts**

```typescript
export const ROUTES = {
  // Auth Stack
  AUTH_STACK: 'AuthStack',
  LOGIN: 'Login',
  REGISTER: 'Register',
  FORGOT_PASSWORD: 'ForgotPassword',

  // Main Stack
  MAIN_STACK: 'MainStack',
  HOME: 'Home',

  // Email Stack
  EMAIL_STACK: 'EmailStack',
  EMAIL_LIST: 'EmailList',
  EMAIL_DETAIL: 'EmailDetail',
  EMAIL_COMPOSE: 'EmailCompose',

  // Calendar Stack
  CALENDAR_STACK: 'CalendarStack',
  CALENDAR: 'Calendar',
  EVENT_DETAIL: 'EventDetail',
  CREATE_EVENT: 'CreateEvent',

  // Task Stack
  TASK_STACK: 'TaskStack',
  TASK_LIST: 'TaskList',
  TASK_DETAIL: 'TaskDetail',
  CREATE_TASK: 'CreateTask',

  // Meeting Stack
  MEETING_STACK: 'MeetingStack',
  MEETING_LIST: 'MeetingList',
  MEETING_ROOM: 'MeetingRoom',
  MEETING_NOTE: 'MeetingNote',

  // Note Stack
  NOTE_STACK: 'NoteStack',
  NOTE_LIST: 'NoteList',
  NOTE_EDITOR: 'NoteEditor',

  // Work Log Stack
  WORKLOG_STACK: 'WorkLogStack',
  WORK_LOG: 'WorkLog',
  STATISTICS: 'Statistics',

  // Settings Stack
  SETTINGS_STACK: 'SettingsStack',
  SETTINGS: 'Settings',
  PROFILE: 'Profile',
  NOTIFICATION_SETTINGS: 'NotificationSettings',
} as const;

export type RouteNames = typeof ROUTES[keyof typeof ROUTES];
```

### 4.3 ç¯å¢ƒå˜é‡é…ç½®

**.env.development**

```bash
# APIé…ç½®
API_BASE_URL=http://localhost:3000/api/v1
API_TIMEOUT=30000

# ç¬¬ä¸‰æ–¹æœåŠ¡
AGORA_APP_ID=your_agora_app_id_dev
TRTC_SDK_APP_ID=your_trtc_app_id_dev

# Firebase (å¯é€‰)
FIREBASE_API_KEY=your_firebase_api_key
FIREBASE_PROJECT_ID=your_firebase_project_id

# Sentry (å¯é€‰)
SENTRY_DSN=your_sentry_dsn_dev

# åŠŸèƒ½å¼€å…³
ENABLE_ANALYTICS=false
ENABLE_CRASH_REPORTING=false
```

**.env.production**

```bash
# APIé…ç½®
API_BASE_URL=https://api.workefficiency.com/v1
API_TIMEOUT=30000

# ç¬¬ä¸‰æ–¹æœåŠ¡
AGORA_APP_ID=your_agora_app_id_prod
TRTC_SDK_APP_ID=your_trtc_app_id_prod

# Firebase
FIREBASE_API_KEY=your_firebase_api_key
FIREBASE_PROJECT_ID=your_firebase_project_id

# Sentry
SENTRY_DSN=your_sentry_dsn_prod

# åŠŸèƒ½å¼€å…³
ENABLE_ANALYTICS=true
ENABLE_CRASH_REPORTING=true
```

**å®‰è£…ç¯å¢ƒå˜é‡åº“**

```bash
npm install react-native-config
npm install --save-dev @types/react-native-config
```

**ä½¿ç”¨ç¯å¢ƒå˜é‡**

```typescript
// src/constants/config.ts
import Config from 'react-native-config';

export const ENV = {
  API_BASE_URL: Config.API_BASE_URL || 'http://localhost:3000/api/v1',
  API_TIMEOUT: parseInt(Config.API_TIMEOUT || '30000', 10),
  AGORA_APP_ID: Config.AGORA_APP_ID || '',
  TRTC_SDK_APP_ID: Config.TRTC_SDK_APP_ID || '',
  ENABLE_ANALYTICS: Config.ENABLE_ANALYTICS === 'true',
  ENABLE_CRASH_REPORTING: Config.ENABLE_CRASH_REPORTING === 'true',
};
```

---

## 5. æ¶æ„è®¾è®¡

### 5.1 ReduxçŠ¶æ€ç®¡ç†æ¶æ„

**src/store/index.ts**

```typescript
import { configureStore } from '@reduxjs/toolkit';
import { setupListeners } from '@reduxjs/toolkit/query';

// Slices
import authReducer from './slices/authSlice';
import emailReducer from './slices/emailSlice';
import calendarReducer from './slices/calendarSlice';
import taskReducer from './slices/taskSlice';
import meetingReducer from './slices/meetingSlice';
import noteReducer from './slices/noteSlice';
import settingsReducer from './slices/settingsSlice';

// RTK Query APIs
import { authApi } from './services/authApi';
import { emailApi } from './services/emailApi';
import { calendarApi } from './services/calendarApi';
import { taskApi } from './services/taskApi';
import { meetingApi } from './services/meetingApi';
import { noteApi } from './services/noteApi';

export const store = configureStore({
  reducer: {
    // Slices
    auth: authReducer,
    email: emailReducer,
    calendar: calendarReducer,
    task: taskReducer,
    meeting: meetingReducer,
    note: noteReducer,
    settings: settingsReducer,
    
    // RTK Query APIs
    [authApi.reducerPath]: authApi.reducer,
    [emailApi.reducerPath]: emailApi.reducer,
    [calendarApi.reducerPath]: calendarApi.reducer,
    [taskApi.reducerPath]: taskApi.reducer,
    [meetingApi.reducerPath]: meetingApi.reducer,
    [noteApi.reducerPath]: noteApi.reducer,
  },
  middleware: (getDefaultMiddleware) =>
    getDefaultMiddleware({
      serializableCheck: {
        // å¿½ç•¥ç‰¹å®šactionç±»å‹çš„åºåˆ—åŒ–æ£€æŸ¥
        ignoredActions: ['persist/PERSIST', 'persist/REHYDRATE'],
      },
    }).concat(
      authApi.middleware,
      emailApi.middleware,
      calendarApi.middleware,
      taskApi.middleware,
      meetingApi.middleware,
      noteApi.middleware
    ),
});

// å¯ç”¨refetchOnFocus/refetchOnReconnectè¡Œä¸º
setupListeners(store.dispatch);

export type RootState = ReturnType<typeof store.getState>;
export type AppDispatch = typeof store.dispatch;
```

**src/store/hooks.ts**

```typescript
import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';
import type { RootState, AppDispatch } from './index';

// è‡ªå®šä¹‰hooksï¼Œå¸¦ç±»å‹
export const useAppDispatch = () => useDispatch<AppDispatch>();
export const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;
```

**src/store/slices/authSlice.tsï¼ˆç¤ºä¾‹ï¼‰**

```typescript
import { createSlice, PayloadAction } from '@reduxjs/toolkit';
import type { RootState } from '../index';

interface User {
  id: string;
  email: string;
  name: string;
  avatar?: string;
}

interface AuthState {
  user: User | null;
  token: string | null;
  refreshToken: string | null;
  isAuthenticated: boolean;
  isLoading: boolean;
  error: string | null;
}

const initialState: AuthState = {
  user: null,
  token: null,
  refreshToken: null,
  isAuthenticated: false,
  isLoading: false,
  error: null,
};

const authSlice = createSlice({
  name: 'auth',
  initialState,
  reducers: {
    setCredentials: (
      state,
      action: PayloadAction<{ user: User; token: string; refreshToken: string }>
    ) => {
      state.user = action.payload.user;
      state.token = action.payload.token;
      state.refreshToken = action.payload.refreshToken;
      state.isAuthenticated = true;
      state.error = null;
    },
    setToken: (state, action: PayloadAction<string>) => {
      state.token = action.payload;
    },
    logout: (state) => {
      state.user = null;
      state.token = null;
      state.refreshToken = null;
      state.isAuthenticated = false;
      state.error = null;
    },
    setLoading: (state, action: PayloadAction<boolean>) => {
      state.isLoading = action.payload;
    },
    setError: (state, action: PayloadAction<string>) => {
      state.error = action.payload;
      state.isLoading = false;
    },
    clearError: (state) => {
      state.error = null;
    },
  },
});

export const { setCredentials, setToken, logout, setLoading, setError, clearError } =
  authSlice.actions;

// Selectors
export const selectCurrentUser = (state: RootState) => state.auth.user;
export const selectIsAuthenticated = (state: RootState) => state.auth.isAuthenticated;
export const selectAuthToken = (state: RootState) => state.auth.token;
export const selectAuthLoading = (state: RootState) => state.auth.isLoading;
export const selectAuthError = (state: RootState) => state.auth.error;

export default authSlice.reducer;
```

**src/store/services/authApi.tsï¼ˆç¤ºä¾‹ï¼‰**

```typescript
import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';
import type { RootState } from '../index';
import { API_ENDPOINTS } from '@constants/api';
import { ENV } from '@constants/config';

interface LoginRequest {
  email: string;
  password: string;
}

interface LoginResponse {
  user: {
    id: string;
    email: string;
    name: string;
    avatar?: string;
  };
  token: string;
  refreshToken: string;
}

interface RegisterRequest {
  email: string;
  password: string;
  name: string;
}

export const authApi = createApi({
  reducerPath: 'authApi',
  baseQuery: fetchBaseQuery({
    baseUrl: ENV.API_BASE_URL,
    prepareHeaders: (headers, { getState }) => {
      const token = (getState() as RootState).auth.token;
      if (token) {
        headers.set('Authorization', `Bearer ${token}`);
      }
      return headers;
    },
  }),
  tagTypes: ['Auth'],
  endpoints: (builder) => ({
    login: builder.mutation<LoginResponse, LoginRequest>({
      query: (credentials) => ({
        url: API_ENDPOINTS.AUTH.LOGIN,
        method: 'POST',
        body: credentials,
      }),
      invalidatesTags: ['Auth'],
    }),
    register: builder.mutation<LoginResponse, RegisterRequest>({
      query: (userData) => ({
        url: API_ENDPOINTS.AUTH.REGISTER,
        method: 'POST',
        body: userData,
      }),
    }),
    logout: builder.mutation<void, void>({
      query: () => ({
        url: API_ENDPOINTS.AUTH.LOGOUT,
        method: 'POST',
      }),
      invalidatesTags: ['Auth'],
    }),
    refreshToken: builder.mutation<{ token: string }, { refreshToken: string }>({
      query: ({ refreshToken }) => ({
        url: API_ENDPOINTS.AUTH.REFRESH,
        method: 'POST',
        body: { refreshToken },
      }),
    }),
  }),
});

export const {
  useLoginMutation,
  useRegisterMutation,
  useLogoutMutation,
  useRefreshTokenMutation,
} = authApi;
```

### 5.2 APIæœåŠ¡é…ç½®

**src/services/api/client.ts**

```typescript
import axios, { AxiosInstance, AxiosRequestConfig, AxiosResponse, AxiosError } from 'axios';
import { ENV, STORAGE_KEYS } from '@constants/config';
import AsyncStorage from '@react-native-async-storage/async-storage';

class ApiClient {
  private client: AxiosInstance;

  constructor() {
    this.client = axios.create({
      baseURL: ENV.API_BASE_URL,
      timeout: ENV.API_TIMEOUT,
      headers: {
        'Content-Type': 'application/json',
      },
    });

    this.setupInterceptors();
  }

  private setupInterceptors() {
    // è¯·æ±‚æ‹¦æˆªå™¨
    this.client.interceptors.request.use(
      async (config) => {
        const token = await AsyncStorage.getItem(STORAGE_KEYS.AUTH_TOKEN);
        if (token) {
          config.headers.Authorization = `Bearer ${token}`;
        }
        return config;
      },
      (error) => {
        return Promise.reject(error);
      }
    );

    // å“åº”æ‹¦æˆªå™¨
    this.client.interceptors.response.use(
      (response) => response,
      async (error: AxiosError) => {
        const originalRequest = error.config as AxiosRequestConfig & { _retry?: boolean };

        // Tokenè¿‡æœŸï¼Œå°è¯•åˆ·æ–°
        if (error.response?.status === 401 && !originalRequest._retry) {
          originalRequest._retry = true;

          try {
            const refreshToken = await AsyncStorage.getItem(STORAGE_KEYS.REFRESH_TOKEN);
            if (refreshToken) {
              const response = await this.client.post('/auth/refresh', { refreshToken });
              const { token } = response.data;

              await AsyncStorage.setItem(STORAGE_KEYS.AUTH_TOKEN, token);

              if (originalRequest.headers) {
                originalRequest.headers.Authorization = `Bearer ${token}`;
              }

              return this.client(originalRequest);
            }
          } catch (refreshError) {
            // åˆ·æ–°å¤±è´¥ï¼Œæ¸…é™¤tokenå¹¶è·³è½¬ç™»å½•
            await AsyncStorage.multiRemove([
              STORAGE_KEYS.AUTH_TOKEN,
              STORAGE_KEYS.REFRESH_TOKEN,
              STORAGE_KEYS.USER_DATA,
            ]);
            // è¿™é‡Œå¯ä»¥è§¦å‘å¯¼èˆªåˆ°ç™»å½•é¡µ
            return Promise.reject(refreshError);
          }
        }

        return Promise.reject(error);
      }
    );
  }

  // GETè¯·æ±‚
  async get<T = any>(url: string, config?: AxiosRequestConfig): Promise<T> {
    const response: AxiosResponse<T> = await this.client.get(url, config);
    return response.data;
  }

  // POSTè¯·æ±‚
  async post<T = any>(url: string, data?: any, config?: AxiosRequestConfig): Promise<T> {
    const response: AxiosResponse<T> = await this.client.post(url, data, config);
    return response.data;
  }

  // PUTè¯·æ±‚
  async put<T = any>(url: string, data?: any, config?: AxiosRequestConfig): Promise<T> {
    const response: AxiosResponse<T> = await this.client.put(url, data, config);
    return response.data;
  }

  // DELETEè¯·æ±‚
  async delete<T = any>(url: string, config?: AxiosRequestConfig): Promise<T> {
    const response: AxiosResponse<T> = await this.client.delete(url, config);
    return response.data;
  }

  // PATCHè¯·æ±‚
  async patch<T = any>(url: string, data?: any, config?: AxiosRequestConfig): Promise<T> {
    const response: AxiosResponse<T> = await this.client.patch(url, data, config);
    return response.data;
  }

  // æ–‡ä»¶ä¸Šä¼ 
  async upload<T = any>(url: string, formData: FormData, config?: AxiosRequestConfig): Promise<T> {
    const response: AxiosResponse<T> = await this.client.post(url, formData, {
      ...config,
      headers: {
        'Content-Type': 'multipart/form-data',
        ...config?.headers,
      },
    });
    return response.data;
  }
}

export const apiClient = new ApiClient();
```

### 5.3 å¯¼èˆªé…ç½®

**src/navigation/types.ts**

```typescript
import { NavigatorScreenParams } from '@react-navigation/native';
import { ROUTES } from '@constants/routes';

// è®¤è¯å¯¼èˆªå‚æ•°
export type AuthStackParamList = {
  [ROUTES.LOGIN]: undefined;
  [ROUTES.REGISTER]: undefined;
  [ROUTES.FORGOT_PASSWORD]: undefined;
};

// ä¸»åº”ç”¨å¯¼èˆªå‚æ•°
export type MainStackParamList = {
  [ROUTES.HOME]: undefined;
  [ROUTES.EMAIL_STACK]: NavigatorScreenParams<EmailStackParamList>;
  [ROUTES.CALENDAR_STACK]: NavigatorScreenParams<CalendarStackParamList>;
  [ROUTES.TASK_STACK]: NavigatorScreenParams<TaskStackParamList>;
  [ROUTES.MEETING_STACK]: NavigatorScreenParams<MeetingStackParamList>;
  [ROUTES.NOTE_STACK]: NavigatorScreenParams<NoteStackParamList>;
  [ROUTES.WORKLOG_STACK]: NavigatorScreenParams<WorkLogStackParamList>;
  [ROUTES.SETTINGS_STACK]: NavigatorScreenParams<SettingsStackParamList>;
};

// é‚®ä»¶æ ˆå‚æ•°
export type EmailStackParamList = {
  [ROUTES.EMAIL_LIST]: undefined;
  [ROUTES.EMAIL_DETAIL]: { emailId: string };
  [ROUTES.EMAIL_COMPOSE]: { replyTo?: string; forward?: string };
};

// æ—¥å†æ ˆå‚æ•°
export type CalendarStackParamList = {
  [ROUTES.CALENDAR]: undefined;
  [ROUTES.EVENT_DETAIL]: { eventId: string };
  [ROUTES.CREATE_EVENT]: { date?: string };
};

// ä»»åŠ¡æ ˆå‚æ•°
export type TaskStackParamList = {
  [ROUTES.TASK_LIST]: undefined;
  [ROUTES.TASK_DETAIL]: { taskId: string };
  [ROUTES.CREATE_TASK]: undefined;
};

// ä¼šè®®æ ˆå‚æ•°
export type MeetingStackParamList = {
  [ROUTES.MEETING_LIST]: undefined;
  [ROUTES.MEETING_ROOM]: { meetingId: string };
  [ROUTES.MEETING_NOTE]: { meetingId: string };
};

// ç¬”è®°æ ˆå‚æ•°
export type NoteStackParamList = {
  [ROUTES.NOTE_LIST]: undefined;
  [ROUTES.NOTE_EDITOR]: { noteId?: string };
};

// å·¥ä½œæ—¥å¿—æ ˆå‚æ•°
export type WorkLogStackParamList = {
  [ROUTES.WORK_LOG]: undefined;
  [ROUTES.STATISTICS]: undefined;
};

// è®¾ç½®æ ˆå‚æ•°
export type SettingsStackParamList = {
  [ROUTES.SETTINGS]: undefined;
  [ROUTES.PROFILE]: undefined;
  [ROUTES.NOTIFICATION_SETTINGS]: undefined;
};

// æ ¹å¯¼èˆªå‚æ•°
export type RootStackParamList = {
  [ROUTES.AUTH_STACK]: NavigatorScreenParams<AuthStackParamList>;
  [ROUTES.MAIN_STACK]: NavigatorScreenParams<MainStackParamList>;
};

declare global {
  namespace ReactNavigation {
    interface RootParamList extends RootStackParamList {}
  }
}
```

**src/navigation/AppNavigator.tsx**

```typescript
import React from 'react';
import { NavigationContainer } from '@react-navigation/native';
import { createNativeStackNavigator } from '@react-navigation/native-stack';
import { useAppSelector } from '@store/hooks';
import { selectIsAuthenticated } from '@store/slices/authSlice';
import { ROUTES } from '@constants/routes';
import AuthNavigator from './AuthNavigator';
import MainNavigator from './MainNavigator';
import type { RootStackParamList } from './types';

const Stack = createNativeStackNavigator<RootStackParamList>();

const AppNavigator = () => {
  const isAuthenticated = useAppSelector(selectIsAuthenticated);

  return (
    <NavigationContainer>
      <Stack.Navigator screenOptions={{ headerShown: false }}>
        {!isAuthenticated ? (
          <Stack.Screen name={ROUTES.AUTH_STACK} component={AuthNavigator} />
        ) : (
          <Stack.Screen name={ROUTES.MAIN_STACK} component={MainNavigator} />
        )}
      </Stack.Navigator>
    </NavigationContainer>
  );
};

export default AppNavigator;
```

**src/navigation/TabNavigator.tsx**

```typescript
import React from 'react';
import { createBottomTabNavigator } from '@react-navigation/bottom-tabs';
import Icon from 'react-native-vector-icons/MaterialCommunityIcons';
import { useTheme } from '@theme';
import { ROUTES } from '@constants/routes';

// å¯¼å…¥å„ä¸ªStack Navigator
import EmailNavigator from './stacks/EmailNavigator';
import CalendarNavigator from './stacks/CalendarNavigator';
import TaskNavigator from './stacks/TaskNavigator';
import MeetingNavigator from './stacks/MeetingNavigator';
import SettingsNavigator from './stacks/SettingsNavigator';

import HomeScreen from '@screens/Home/HomeScreen';

const Tab = createBottomTabNavigator();

const TabNavigator = () => {
  const { theme } = useTheme();

  return (
    <Tab.Navigator
      screenOptions={{
        headerShown: false,
        tabBarActiveTintColor: theme.colors.primary,
        tabBarInactiveTintColor: theme.colors.text.secondary,
        tabBarStyle: {
          backgroundColor: theme.colors.surface,
          borderTopColor: theme.colors.border,
        },
      }}>
      <Tab.Screen
        name={ROUTES.HOME}
        component={HomeScreen}
        options={{
          tabBarLabel: 'é¦–é¡µ',
          tabBarIcon: ({ color, size }) => <Icon name="home" size={size} color={color} />,
        }}
      />
      <Tab.Screen
        name={ROUTES.EMAIL_STACK}
        component={EmailNavigator}
        options={{
          tabBarLabel: 'é‚®ä»¶',
          tabBarIcon: ({ color, size }) => <Icon name="email" size={size} color={color} />,
          tabBarBadge: undefined, // å¯ä»¥åŠ¨æ€æ˜¾ç¤ºæœªè¯»æ•°
        }}
      />
      <Tab.Screen
        name={ROUTES.CALENDAR_STACK}
        component={CalendarNavigator}
        options={{
          tabBarLabel: 'æ—¥å†',
          tabBarIcon: ({ color, size }) => <Icon name="calendar" size={size} color={color} />,
        }}
      />
      <Tab.Screen
        name={ROUTES.TASK_STACK}
        component={TaskNavigator}
        options={{
          tabBarLabel: 'ä»»åŠ¡',
          tabBarIcon: ({ color, size }) => (
            <Icon name="checkbox-marked-circle" size={size} color={color} />
          ),
        }}
      />
      <Tab.Screen
        name={ROUTES.SETTINGS_STACK}
        component={SettingsNavigator}
        options={{
          tabBarLabel: 'è®¾ç½®',
          tabBarIcon: ({ color, size }) => <Icon name="cog" size={size} color={color} />,
        }}
      />
    </Tab.Navigator>
  );
};

export default TabNavigator;
```

### 5.4 æœ¬åœ°å­˜å‚¨é…ç½®

**src/services/storage/asyncStorage.ts**

```typescript
import AsyncStorage from '@react-native-async-storage/async-storage';
import { STORAGE_KEYS } from '@constants/config';

class StorageService {
  // ä¿å­˜æ•°æ®
  async setItem(key: string, value: any): Promise<void> {
    try {
      const jsonValue = JSON.stringify(value);
      await AsyncStorage.setItem(key, jsonValue);
    } catch (error) {
      console.error('Error saving data:', error);
      throw error;
    }
  }

  // è·å–æ•°æ®
  async getItem<T>(key: string): Promise<T | null> {
    try {
      const jsonValue = await AsyncStorage.getItem(key);
      return jsonValue != null ? JSON.parse(jsonValue) : null;
    } catch (error) {
      console.error('Error reading data:', error);
      return null;
    }
  }

  // åˆ é™¤æ•°æ®
  async removeItem(key: string): Promise<void> {
    try {
      await AsyncStorage.removeItem(key);
    } catch (error) {
      console.error('Error removing data:', error);
      throw error;
    }
  }

  // æ¸…ç©ºæ‰€æœ‰æ•°æ®
  async clear(): Promise<void> {
    try {
      await AsyncStorage.clear();
    } catch (error) {
      console.error('Error clearing storage:', error);
      throw error;
    }
  }

  // æ‰¹é‡åˆ é™¤
  async multiRemove(keys: string[]): Promise<void> {
    try {
      await AsyncStorage.multiRemove(keys);
    } catch (error) {
      console.error('Error removing multiple items:', error);
      throw error;
    }
  }

  // Authç›¸å…³ä¾¿æ·æ–¹æ³•
  async saveAuthData(token: string, refreshToken: string, user: any): Promise<void> {
    try {
      await AsyncStorage.multiSet([
        [STORAGE_KEYS.AUTH_TOKEN, token],
        [STORAGE_KEYS.REFRESH_TOKEN, refreshToken],
        [STORAGE_KEYS.USER_DATA, JSON.stringify(user)],
      ]);
    } catch (error) {
      console.error('Error saving auth data:', error);
      throw error;
    }
  }

  async clearAuthData(): Promise<void> {
    try {
      await AsyncStorage.multiRemove([
        STORAGE_KEYS.AUTH_TOKEN,
        STORAGE_KEYS.REFRESH_TOKEN,
        STORAGE_KEYS.USER_DATA,
      ]);
    } catch (error) {
      console.error('Error clearing auth data:', error);
      throw error;
    }
  }
}

export const storageService = new StorageService();
```

**src/services/storage/secureStorage.tsï¼ˆä½¿ç”¨Keychain/Keystoreï¼‰**

```bash
# å®‰è£…react-native-keychain
npm install react-native-keychain
```

```typescript
import * as Keychain from 'react-native-keychain';

class SecureStorageService {
  // ä¿å­˜æ•æ„Ÿæ•°æ®
  async setSecureItem(username: string, password: string): Promise<void> {
    try {
      await Keychain.setGenericPassword(username, password);
    } catch (error) {
      console.error('Error saving secure data:', error);
      throw error;
    }
  }

  // è·å–æ•æ„Ÿæ•°æ®
  async getSecureItem(): Promise<{ username: string; password: string } | false> {
    try {
      const credentials = await Keychain.getGenericPassword();
      return credentials;
    } catch (error) {
      console.error('Error getting secure data:', error);
      return false;
    }
  }

  // åˆ é™¤æ•æ„Ÿæ•°æ®
  async removeSecureItem(): Promise<void> {
    try {
      await Keychain.resetGenericPassword();
    } catch (error) {
      console.error('Error removing secure data:', error);
      throw error;
    }
  }
}

export const secureStorageService = new SecureStorageService();
```

### 5.5 å›½é™…åŒ–é…ç½®

**src/services/i18n/config.ts**

```typescript
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import AsyncStorage from '@react-native-async-storage/async-storage';
import { STORAGE_KEYS } from '@constants/config';

// å¯¼å…¥è¯­è¨€åŒ…
import en from './locales/en.json';
import zh from './locales/zh.json';
import ja from './locales/ja.json';

const LANGUAGE_DETECTOR = {
  type: 'languageDetector' as const,
  async: true,
  detect: async (callback: (lang: string) => void) => {
    try {
      const language = await AsyncStorage.getItem(STORAGE_KEYS.LANGUAGE);
      callback(language || 'en');
    } catch (error) {
      callback('en');
    }
  },
  init: () => {},
  cacheUserLanguage: async (language: string) => {
    try {
      await AsyncStorage.setItem(STORAGE_KEYS.LANGUAGE, language);
    } catch (error) {
      console.error('Error caching language:', error);
    }
  },
};

i18n
  .use(LANGUAGE_DETECTOR)
  .use(initReactI18next)
  .init({
    resources: {
      en: { translation: en },
      zh: { translation: zh },
      ja: { translation: ja },
    },
    fallbackLng: 'en',
    compatibilityJSON: 'v3',
    interpolation: {
      escapeValue: false,
    },
    react: {
      useSuspense: false,
    },
  });

export default i18n;
```

**src/services/i18n/locales/en.json**

```json
{
  "common": {
    "ok": "OK",
    "cancel": "Cancel",
    "save": "Save",
    "delete": "Delete",
    "edit": "Edit",
    "search": "Search",
    "loading": "Loading...",
    "error": "Error",
    "success": "Success"
  },
  "auth": {
    "login": "Login",
    "register": "Register",
    "email": "Email",
    "password": "Password",
    "forgotPassword": "Forgot Password?",
    "loginSuccess": "Login successful",
    "loginError": "Login failed"
  },
  "email": {
    "inbox": "Inbox",
    "sent": "Sent",
    "compose": "Compose",
    "reply": "Reply",
    "forward": "Forward"
  }
}
```

**src/services/i18n/locales/zh.json**

```json
{
  "common": {
    "ok": "ç¡®å®š",
    "cancel": "å–æ¶ˆ",
    "save": "ä¿å­˜",
    "delete": "åˆ é™¤",
    "edit": "ç¼–è¾‘",
    "search": "æœç´¢",
    "loading": "åŠ è½½ä¸­...",
    "error": "é”™è¯¯",
    "success": "æˆåŠŸ"
  },
  "auth": {
    "login": "ç™»å½•",
    "register": "æ³¨å†Œ",
    "email": "é‚®ç®±",
    "password": "å¯†ç ",
    "forgotPassword": "å¿˜è®°å¯†ç ï¼Ÿ",
    "loginSuccess": "ç™»å½•æˆåŠŸ",
    "loginError": "ç™»å½•å¤±è´¥"
  },
  "email": {
    "inbox": "æ”¶ä»¶ç®±",
    "sent": "å·²å‘é€",
    "compose": "å†™é‚®ä»¶",
    "reply": "å›å¤",
    "forward": "è½¬å‘"
  }
}
```

---

## 6. åŠŸèƒ½æ¨¡å—å®ç°

### 6.1 è®¤è¯æ¨¡å—

**src/screens/Auth/LoginScreen.tsxï¼ˆç¤ºä¾‹ï¼‰**

```typescript
import React, { useState } from 'react';
import { View, StyleSheet, Alert } from 'react-native';
import { Button, TextInput, Text } from 'react-native-paper';
import { useTranslation } from 'react-i18next';
import { useNavigation } from '@react-navigation/native';
import { useAppDispatch } from '@store/hooks';
import { setCredentials } from '@store/slices/authSlice';
import { useLoginMutation } from '@store/services/authApi';
import { useTheme } from '@theme';
import { storageService } from '@services/storage/asyncStorage';
import { useBiometric } from '@hooks/useBiometric';

const LoginScreen = () => {
  const { t } = useTranslation();
  const { theme } = useTheme();
  const navigation = useNavigation();
  const dispatch = useAppDispatch();
  const { authenticate } = useBiometric();

  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [secureTextEntry, setSecureTextEntry] = useState(true);

  const [login, { isLoading }] = useLoginMutation();

  const handleLogin = async () => {
    if (!email || !password) {
      Alert.alert(t('common.error'), t('auth.fillAllFields'));
      return;
    }

    try {
      const response = await login({ email, password }).unwrap();
      
      // ä¿å­˜åˆ°Redux
      dispatch(
        setCredentials({
          user: response.user,
          token: response.token,
          refreshToken: response.refreshToken,
        })
      );

      // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
      await storageService.saveAuthData(
        response.token,
        response.refreshToken,
        response.user
      );

      Alert.alert(t('common.success'), t('auth.loginSuccess'));
    } catch (error: any) {
      Alert.alert(t('common.error'), error?.data?.message || t('auth.loginError'));
    }
  };

  const handleBiometricLogin = async () => {
    const success = await authenticate();
    if (success) {
      // ä»å®‰å…¨å­˜å‚¨è·å–å‡­æ®å¹¶ç™»å½•
      // å®ç°é€»è¾‘...
    }
  };

  return (
    <View style={[styles.container, { backgroundColor: theme.colors.background }]}>
      <Text variant="headlineMedium" style={styles.title}>
        {t('auth.login')}
      </Text>

      <TextInput
        label={t('auth.email')}
        value={email}
        onChangeText={setEmail}
        mode="outlined"
        keyboardType="email-address"
        autoCapitalize="none"
        style={styles.input}
      />

      <TextInput
        label={t('auth.password')}
        value={password}
        onChangeText={setPassword}
        mode="outlined"
        secureTextEntry={secureTextEntry}
        right={
          <TextInput.Icon
            icon={secureTextEntry ? 'eye-off' : 'eye'}
            onPress={() => setSecureTextEntry(!secureTextEntry)}
          />
        }
        style={styles.input}
      />

      <Button
        mode="contained"
        onPress={handleLogin}
        loading={isLoading}
        disabled={isLoading}
        style={styles.button}>
        {t('auth.login')}
      </Button>

      <Button mode="text" onPress={handleBiometricLogin} style={styles.biometricButton}>
        {t('auth.useBiometric')}
      </Button>

      <Button mode="text" onPress={() => navigation.navigate('Register' as never)}>
        {t('auth.noAccount')}
      </Button>
    </View>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    padding: 20,
    justifyContent: 'center',
  },
  title: {
    textAlign: 'center',
    marginBottom: 30,
  },
  input: {
    marginBottom: 16,
  },
  button: {
    marginTop: 16,
  },
  biometricButton: {
    marginTop: 8,
  },
});

export default LoginScreen;
```

### 6.2 è‡ªå®šä¹‰Hooksç¤ºä¾‹

**src/hooks/useBiometric.ts**

```typescript
import { useState, useEffect } from 'react';
import ReactNativeBiometrics from 'react-native-biometrics';
import { Alert } from 'react-native';
import { useTranslation } from 'react-i18next';

export const useBiometric = () => {
  const { t } = useTranslation();
  const [isAvailable, setIsAvailable] = useState(false);
  const [biometryType, setBiometryType] = useState<string | null>(null);

  useEffect(() => {
    checkBiometricAvailability();
  }, []);

  const checkBiometricAvailability = async () => {
    try {
      const rnBiometrics = new ReactNativeBiometrics();
      const { available, biometryType: type } = await rnBiometrics.isSensorAvailable();
      setIsAvailable(available);
      setBiometryType(type);
    } catch (error) {
      console.error('Biometric check error:', error);
    }
  };

  const authenticate = async (): Promise<boolean> => {
    if (!isAvailable) {
      Alert.alert(t('common.error'), t('biometric.notAvailable'));
      return false;
    }

    try {
      const rnBiometrics = new ReactNativeBiometrics();
      const { success } = await rnBiometrics.simplePrompt({
        promptMessage: t('biometric.authenticate'),
        cancelButtonText: t('common.cancel'),
      });

      return success;
    } catch (error) {
      console.error('Biometric authentication error:', error);
      return false;
    }
  };

  return {
    isAvailable,
    biometryType,
    authenticate,
  };
};
```

### 6.3 é€šç”¨ç»„ä»¶ç¤ºä¾‹

**src/components/common/Button/Button.tsx**

```typescript
import React from 'react';
import { TouchableOpacity, Text, StyleSheet, ActivityIndicator, ViewStyle, TextStyle } from 'react-native';
import { useTheme } from '@theme';

interface ButtonProps {
  title: string;
  onPress: () => void;
  variant?: 'primary' | 'secondary' | 'outline' | 'text';
  size?: 'small' | 'medium' | 'large';
  disabled?: boolean;
  loading?: boolean;
  icon?: React.ReactNode;
  style?: ViewStyle;
  textStyle?: TextStyle;
}

const Button: React.FC<ButtonProps> = ({
  title,
  onPress,
  variant = 'primary',
  size = 'medium',
  disabled = false,
  loading = false,
  icon,
  style,
  textStyle,
}) => {
  const { theme } = useTheme();

  const getButtonStyle = (): ViewStyle => {
    const baseStyle: ViewStyle = {
      borderRadius: 8,
      justifyContent: 'center',
      alignItems: 'center',
      flexDirection: 'row',
    };

    // Size
    switch (size) {
      case 'small':
        baseStyle.paddingVertical = 8;
        baseStyle.paddingHorizontal = 16;
        break;
      case 'large':
        baseStyle.paddingVertical = 16;
        baseStyle.paddingHorizontal = 32;
        break;
      default: // medium
        baseStyle.paddingVertical = 12;
        baseStyle.paddingHorizontal = 24;
    }

    // Variant
    switch (variant) {
      case 'primary':
        baseStyle.backgroundColor = theme.colors.primary;
        break;
      case 'secondary':
        baseStyle.backgroundColor = theme.colors.secondary;
        break;
      case 'outline':
        baseStyle.backgroundColor = 'transparent';
        baseStyle.borderWidth = 1;
        baseStyle.borderColor = theme.colors.primary;
        break;
      case 'text':
        baseStyle.backgroundColor = 'transparent';
        break;
    }

    if (disabled) {
      baseStyle.opacity = 0.5;
    }

    return baseStyle;
  };

  const getTextStyle = (): TextStyle => {
    const baseTextStyle: TextStyle = {
      fontWeight: '600',
    };

    // Size
    switch (size) {
      case 'small':
        baseTextStyle.fontSize = 12;
        break;
      case 'large':
        baseTextStyle.fontSize = 18;
        break;
      default: // medium
        baseTextStyle.fontSize = 14;
    }

    // Variant
    switch (variant) {
      case 'primary':
      case 'secondary':
        baseTextStyle.color = theme.colors.onPrimary;
        break;
      case 'outline':
      case 'text':
        baseTextStyle.color = theme.colors.primary;
        break;
    }

    return baseTextStyle;
  };

  return (
    <TouchableOpacity
      style={[getButtonStyle(), style]}
      onPress={onPress}
      disabled={disabled || loading}
      activeOpacity={0.7}>
      {loading ? (
        <ActivityIndicator
          size="small"
          color={variant === 'primary' || variant === 'secondary' ? theme.colors.onPrimary : theme.colors.primary}
        />
      ) : (
        <>
          {icon}
          <Text style={[getTextStyle(), icon && { marginLeft: 8 }, textStyle]}>{title}</Text>
        </>
      )}
    </TouchableOpacity>
  );
};

export default Button;
```

---

## 7. æ€§èƒ½ä¼˜åŒ–

### 7.1 å›¾ç‰‡ä¼˜åŒ–

```bash
# å®‰è£…å›¾ç‰‡ä¼˜åŒ–åº“
npm install react-native-fast-image
```

**ä½¿ç”¨FastImageæ›¿ä»£Image**

```typescript
import FastImage from 'react-native-fast-image';

<FastImage
  style={{ width: 200, height: 200 }}
  source={{
    uri: 'https://example.com/image.jpg',
    priority: FastImage.priority.high,
    cache: FastImage.cacheControl.immutable,
  }}
  resizeMode={FastImage.resizeMode.contain}
/>
```

### 7.2 åˆ—è¡¨ä¼˜åŒ–

```typescript
import React, { useCallback } from 'react';
import { FlatList } from 'react-native';

// ä½¿ç”¨React.memoåŒ…è£¹åˆ—è¡¨é¡¹
const EmailItem = React.memo(({ item }) => {
  return (
    <View>
      <Text>{item.subject}</Text>
    </View>
  );
});

const EmailListScreen = () => {
  // ä½¿ç”¨useCallbackä¼˜åŒ–å‡½æ•°
  const renderItem = useCallback(({ item }) => <EmailItem item={item} />, []);
  
  const keyExtractor = useCallback((item) => item.id, []);

  return (
    <FlatList
      data={emails}
      renderItem={renderItem}
      keyExtractor={keyExtractor}
      // æ€§èƒ½ä¼˜åŒ–é…ç½®
      removeClippedSubviews={true}
      maxToRenderPerBatch={10}
      updateCellsBatchingPeriod={50}
      initialNumToRender={10}
      windowSize={10}
      getItemLayout={(data, index) => ({
        length: ITEM_HEIGHT,
        offset: ITEM_HEIGHT * index,
        index,
      })}
    />
  );
};
```

### 7.3 Reanimatedæ€§èƒ½ä¼˜åŒ–

```bash
# ä½¿ç”¨React Native Reanimatedå®ç°æµç•…åŠ¨ç”»
npm install react-native-reanimated
```

```typescript
import Animated, {
  useAnimatedStyle,
  useSharedValue,
  withSpring,
} from 'react-native-reanimated';

const AnimatedComponent = () => {
  const offset = useSharedValue(0);

  const animatedStyles = useAnimatedStyle(() => {
    return {
      transform: [{ translateX: withSpring(offset.value) }],
    };
  });

  return <Animated.View style={[styles.box, animatedStyles]} />;
};
```

### 7.4 Code Splitting (æ‡’åŠ è½½)

```typescript
import React, { lazy, Suspense } from 'react';
import { ActivityIndicator, View } from 'react-native';

// æ‡’åŠ è½½å±å¹•ç»„ä»¶
const EmailDetailScreen = lazy(() => import('./EmailDetailScreen'));

const App = () => {
  return (
    <Suspense
      fallback={
        <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>
          <ActivityIndicator size="large" />
        </View>
      }>
      <EmailDetailScreen />
    </Suspense>
  );
};
```

---

## 8. æµ‹è¯•ç­–ç•¥

### 8.1 å•å…ƒæµ‹è¯•é…ç½®

```bash
# Jestå·²å†…ç½®ï¼Œå®‰è£…æµ‹è¯•åº“
npm install --save-dev @testing-library/react-native @testing-library/jest-native
```

**jest.config.js**

```javascript
module.exports = {
  preset: 'react-native',
  setupFilesAfterEnv: ['@testing-library/jest-native/extend-expect'],
  transformIgnorePatterns: [
    'node_modules/(?!(react-native|@react-native|@react-navigation)/)',
  ],
  moduleNameMapper: {
    '^@components/(.*)$': '<rootDir>/src/components/$1',
    '^@screens/(.*)$': '<rootDir>/src/screens/$1',
    '^@navigation/(.*)$': '<rootDir>/src/navigation/$1',
    '^@services/(.*)$': '<rootDir>/src/services/$1',
    '^@store/(.*)$': '<rootDir>/src/store/$1',
    '^@utils/(.*)$': '<rootDir>/src/utils/$1',
    '^@hooks/(.*)$': '<rootDir>/src/hooks/$1',
    '^@constants/(.*)$': '<rootDir>/src/constants/$1',
  },
  collectCoverageFrom: [
    'src/**/*.{ts,tsx}',
    '!src/**/*.d.ts',
    '!src/**/*.stories.tsx',
  ],
};
```

**__tests__/components/Button.test.tsx**

```typescript
import React from 'react';
import { render, fireEvent } from '@testing-library/react-native';
import Button from '@components/common/Button/Button';

describe('Button Component', () => {
  it('renders correctly', () => {
    const { getByText } = render(<Button title="Test Button" onPress={() => {}} />);
    expect(getByText('Test Button')).toBeTruthy();
  });

  it('calls onPress when pressed', () => {
    const onPressMock = jest.fn();
    const { getByText } = render(<Button title="Test Button" onPress={onPressMock} />);
    
    fireEvent.press(getByText('Test Button'));
    expect(onPressMock).toHaveBeenCalledTimes(1);
  });

  it('is disabled when loading', () => {
    const onPressMock = jest.fn();
    const { getByText } = render(
      <Button title="Test Button" onPress={onPressMock} loading={true} />
    );
    
    fireEvent.press(getByText('Test Button'));
    expect(onPressMock).not.toHaveBeenCalled();
  });
});
```

### 8.2 é›†æˆæµ‹è¯•

```typescript
import { renderHook, act } from '@testing-library/react-hooks';
import { Provider } from 'react-redux';
import { store } from '@store';
import { useAuth } from '@hooks/useAuth';

describe('useAuth Hook', () => {
  const wrapper = ({ children }: any) => <Provider store={store}>{children}</Provider>;

  it('should login successfully', async () => {
    const { result } = renderHook(() => useAuth(), { wrapper });

    await act(async () => {
      await result.current.login('test@example.com', 'password');
    });

    expect(result.current.isAuthenticated).toBe(true);
  });
});
```

### 8.3 E2Eæµ‹è¯•ï¼ˆä½¿ç”¨Detoxï¼‰

```bash
# å®‰è£…Detox
npm install --save-dev detox
```

**e2e/loginFlow.test.js**

```javascript
describe('Login Flow', () => {
  beforeAll(async () => {
    await device.launchApp();
  });

  it('should login successfully', async () => {
    await element(by.id('email-input')).typeText('test@example.com');
    await element(by.id('password-input')).typeText('password123');
    await element(by.id('login-button')).tap();
    
    await expect(element(by.id('home-screen'))).toBeVisible();
  });
});
```

---

## 9. æ‰“åŒ…å‘å¸ƒ

### 9.1 Androidæ‰“åŒ…

```bash
# 1. ç”Ÿæˆç­¾åå¯†é’¥
keytool -genkeypair -v -storetype PKCS12 -keystore my-release-key.keystore -alias my-key-alias -keyalg RSA -keysize 2048 -validity 10000

# 2. é…ç½® android/gradle.properties
MYAPP_RELEASE_STORE_FILE=my-release-key.keystore
MYAPP_RELEASE_KEY_ALIAS=my-key-alias
MYAPP_RELEASE_STORE_PASSWORD=*****
MYAPP_RELEASE_KEY_PASSWORD=*****

# 3. é…ç½® android/app/build.gradle
android {
    signingConfigs {
        release {
            storeFile file(MYAPP_RELEASE_STORE_FILE)
            storePassword MYAPP_RELEASE_STORE_PASSWORD
            keyAlias MYAPP_RELEASE_KEY_ALIAS
            keyPassword MYAPP_RELEASE_KEY_PASSWORD
        }
    }
    buildTypes {
        release {
            signingConfig signingConfigs.release
            minifyEnabled true
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
}

# 4. æ‰“åŒ…ç”ŸæˆAPK
cd android
./gradlew assembleRelease

# 5. æ‰“åŒ…ç”ŸæˆAAB (Google Play)
./gradlew bundleRelease

# è¾“å‡ºä½ç½®:
# APK: android/app/build/outputs/apk/release/app-release.apk
# AAB: android/app/build/outputs/bundle/release/app-release.aab
```

### 9.2 iOSæ‰“åŒ…

```bash
# 1. åœ¨Xcodeä¸­é…ç½®ç­¾å
# - æ‰“å¼€ ios/WorkEfficiencyApp.xcworkspace
# - é€‰æ‹©é¡¹ç›® -> Signing & Capabilities
# - é€‰æ‹©Teamå’ŒProvisioning Profile

# 2. Archive
# åœ¨Xcodeä¸­: Product -> Archive

# 3. ä¸Šä¼ åˆ°App Store Connect
# Window -> Organizer -> é€‰æ‹©Archive -> Distribute App

# æˆ–ä½¿ç”¨å‘½ä»¤è¡Œ
cd ios
xcodebuild -workspace WorkEfficiencyApp.xcworkspace \
           -scheme WorkEfficiencyApp \
           -configuration Release \
           -archivePath build/WorkEfficiencyApp.xcarchive \
           archive

# å¯¼å‡ºIPA
xcodebuild -exportArchive \
           -archivePath build/WorkEfficiencyApp.xcarchive \
           -exportPath build \
           -exportOptionsPlist ExportOptions.plist
```

### 9.3 ç‰ˆæœ¬ç®¡ç†

**package.json æ·»åŠ è„šæœ¬**

```json
{
  "scripts": {
    "android:build": "cd android && ./gradlew assembleRelease",
    "android:bundle": "cd android && ./gradlew bundleRelease",
    "ios:build": "cd ios && xcodebuild -workspace WorkEfficiencyApp.xcworkspace -scheme WorkEfficiencyApp -configuration Release",
    "version:patch": "npm version patch",
    "version:minor": "npm version minor",
    "version:major": "npm version major"
  }
}
```

### 9.4 æŒç»­é›†æˆé…ç½®ï¼ˆGitHub Actionsç¤ºä¾‹ï¼‰

**.github/workflows/build.yml**

```yaml
name: Build and Test

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  build-android:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '20'
      - name: Install dependencies
        run: npm install
      - name: Run tests
        run: npm test
      - name: Build Android
        run: cd android && ./gradlew assembleRelease

  build-ios:
    runs-on: macos-latest
    steps:
      - uses: actions/checkout@v3
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '20'
      - name: Install dependencies
        run: npm install
      - name: Install Pods
        run: cd ios && pod install
      - name: Build iOS
        run: |
          cd ios
          xcodebuild -workspace WorkEfficiencyApp.xcworkspace \
                     -scheme WorkEfficiencyApp \
                     -configuration Release \
                     -sdk iphoneos \
                     build
```

---

## ğŸ“ æ€»ç»“

è¿™ä»½æ–‡æ¡£æ¶µç›–äº†ä»ç¯å¢ƒå‡†å¤‡åˆ°æ‰“åŒ…å‘å¸ƒçš„å®Œæ•´React Nativeé¡¹ç›®æ­å»ºæµç¨‹ï¼š

1. âœ… ç¯å¢ƒå‡†å¤‡ä¸å·¥å…·å®‰è£…
2. âœ… é¡¹ç›®åˆå§‹åŒ–ä¸åŸºç¡€é…ç½®
3. âœ… æ¸…æ™°çš„ç›®å½•ç»“æ„è®¾è®¡
4. âœ… æ ¸å¿ƒé…ç½®ï¼ˆä¸»é¢˜ã€å¸¸é‡ã€ç¯å¢ƒå˜é‡ï¼‰
5. âœ… æ¶æ„è®¾è®¡ï¼ˆReduxã€APIã€å¯¼èˆªã€å­˜å‚¨ï¼‰
6. âœ… åŠŸèƒ½æ¨¡å—å®ç°ç¤ºä¾‹
7. âœ… æ€§èƒ½ä¼˜åŒ–ç­–ç•¥
8. âœ… æµ‹è¯•ç­–ç•¥
9. âœ… æ‰“åŒ…å‘å¸ƒæµç¨‹

**ä¸‹ä¸€æ­¥è¡ŒåŠ¨å»ºè®®ï¼š**
1. æŒ‰ç…§æ–‡æ¡£é¡ºåºæ‰§è¡Œç¯å¢ƒæ­å»º
2. åˆ›å»ºé¡¹ç›®å¹¶é…ç½®åŸºç¡€æ¶æ„
3. å®ç°æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
4. è¿›è¡Œæµ‹è¯•å’Œä¼˜åŒ–
5. æ‰“åŒ…å‘å¸ƒ

å¦‚éœ€æŸä¸ªå…·ä½“æ¨¡å—çš„è¯¦ç»†å®ç°ä»£ç ï¼Œæˆ‘å¯ä»¥è¿›ä¸€æ­¥å±•å¼€ï¼